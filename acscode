!alias acs embed
<drac2>
# get helptext gvar
helptext = get_gvar("3c6e3f64-815a-4dda-9c7e-134a2583ca19")
# get prices svar
prices = load_json(get_svar('acsPrices'))
allPrice = [i for i in prices]
# define variable for arg parsing
args = &ARGS&
pargs = argparse(args)
# define check/buy/sell amount and symbol variables
if args :
  cbs,A,S = args[0].lower() if args else "help", pargs.last('amt'), pargs.last('sym').lower()
  # sym = [x for x in prices if S.lower() in x.lower()]
  sym = prices[S]
  sName = sym['name']
  sPrice = sym['price']
  sDesc = sym['desc']
# define help variable
help = args[0].lower() in '?help' if args else True
# define a description variable containing the basic description
desc = "This is an alias to trade on the Atlas CurrenSea!"

# start an if/else that first checks if the user asks for help
if help :
  output = "Usage|{helptext}"
# if they dont ask for help check if they're checking, buying, or selling
elif cbs == "check" :
  output = "Checking prices...|*Name:* {sName}\n\n*Price:* {sPrice}\n\n*Company Description:* {sDesc}"
elif cbs == "buy" :
  output = "Buying Stock!|You bought this amount of that"
elif cbs == "sell" :
  output = "Selling Stock!|You sold this amount of that"
else :
  output = "Usage|This will be useful help text" 

text = (f'-title "Atlas CurrenSea!"'
  f' -desc "{desc}"'
  f' -f "{output}"'
  f' -f "Prices|{prices}"'
  f' -f "sym|{sym}"'
  f' -f "sName|{sName}"'
  f' -f "sPrice|{sPrice}"'
  f' -f "allPrice|{allPrice}"')
  
return text

</drac2>
